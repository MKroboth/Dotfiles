#!/bin/sh 


# BSPWM CONFIG

bspc config click_to_focus none
bspc config focus_follows_pointer on

export _JAVA_AWT_WM_NONREPARENTING=1
# Startup Programs

for f in /etc/X11/xinit/xinitrc.d/*; do
  if [ -x "$f" ]; then
    "$f" &
  fi
done


start_programs () {
actual_border_width=$(bspc config border_width)

bspc config border_width 0

xsetroot -cursor_name left_ptr
systemctl --user start pulseaudio.service

if [ -f "${HOME}/.keypw" ]; then
  cat "${HOME}/.keypw" | keepassxc "${HOME}/Passwords.kdbx" --pw-stdin &
fi

dex -a &
dex -a -s ${HOME}/.config/bspwm/autostart &


systemctl --user start window-manager.target 

#sxhkd &
#bspc wm --adopt-orphans

if [ -f "${HOME}/.fehbg" ]; then
true;#${HOME}/.fehbg &
fi
picom -b --config ${HOME}/.config/picom/config &>/dev/null &

target=laptop
if [ $(hostname) == "elektra" ]; then
target=workstation
fi

polybar $target &>/dev/null & 
}

start_programs &> /tmp/bspwm_startup.log
unset start_programs

bspc config border_width $actual_border_width
